<% 
  volumes_collection = Disposal.available_volumes[@disposal.solid? ? :solid : :liquid].map do |v|
    ["#{v} litri", v]
  end
%>  

<%= simple_form_for [@disposal_type, @disposal], wrapper: :horizontal_form do |f| %>  
  <% if @permitted_producers && @permitted_producers.any? %>  
    <%= f.association :producer, collection: @permitted_producers, include_blank: false, label_method: :cn_militar %>  
  <% elsif policy(current_organization).manage? %>
      <%= content_tag :div, data: { controller: "dsa-awesomplete", dsa_awesomplete_users_value: @cache_users_json } do %>
        <%= f.input :producer_upn, hint: "Inserire l'indirizzo e-mail SOLO se il produttore di rifiuti non sei TU.", placeholder: current_user.upn %>
      <% end %>
  <% end %>
  <%= f.association :lab, collection: current_organization.labs.order(:name) %>  
  <%= f.input :volume, as: :radio_buttons, collection: volumes_collection, wrapper: :horizontal_collection %>  
  <%= f.input :kgs, as: :float, input_html: { step: 0.1 } %>  
  <%= f.input :notes %>  
  <div class="my-4">
    <%= f.submit %>  
  </div>
<% end %>

